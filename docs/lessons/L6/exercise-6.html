

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Exercise 6 &mdash; DS4Earth sp2020 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../',
              VERSION:'sp2020',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link href="../../_static/geo-python.css" rel="stylesheet" type="text/css">
     

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> DS4Earth
          

          
            
            <img src="../../_static/HY-logo-2017.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                2020
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Course information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/course-info.html">General info</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../course-info/course-info.html#course-meetings">Course meetings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../course-info/course-info.html#instructor">Instructor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../course-info/course-info.html#learning-assistants">Learning Assistants</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../course-info/course-info.html#course-websites">Course websites</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/grading.html">Grading</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../course-info/grading.html#general-grading-breakdown">General grading breakdown</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Lesson 1</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../L1/motivation.html">Motivation for the course</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../L1/motivation.html#effective-data-visualization">Effective data visualization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../L1/overview.html">Lesson overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../L1/overview.html#learning-goals">Learning goals</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../L1/course-environment-components.html">Course environment</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../L1/course-environment-components.html#jupyterlab">JupyterLab</a></li>
<li class="toctree-l2"><a class="reference internal" href="../L1/course-environment-components.html#cloud-computing-environments">Cloud computing environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../L1/course-environment-components.html#using-your-own-computer">Using your own computer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../L1/course-environment-components.html#git-and-github">Git and GitHub</a></li>
<li class="toctree-l2"><a class="reference internal" href="../L1/course-environment-components.html#slack">Slack</a></li>
<li class="toctree-l2"><a class="reference internal" href="../L1/course-environment-components.html#page-summary">Page summary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../L1/slack-usage.html">Communicating with Slack</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../L1/slack-usage.html#accessing-the-workspace-in-slack">Accessing the workspace in Slack</a></li>
<li class="toctree-l2"><a class="reference internal" href="../L1/slack-usage.html#overview-of-slack">Overview of Slack</a></li>
<li class="toctree-l2"><a class="reference internal" href="../L1/slack-usage.html#basic-usage-of-slack">Basic usage of Slack</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../L1/slack-usage.html#notifying-a-user">Notifying a user</a></li>
<li class="toctree-l3"><a class="reference internal" href="../L1/slack-usage.html#using-threads">Using threads</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../L1/slack-usage.html#general-guidelines-for-communication">General guidelines for communication</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">DS4Earth</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Exercise 6</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/DS4Earth/sp2020/blob/master//source/lessons/L6/exercise-6.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="exercise-6">
<h1>Exercise 6<a class="headerlink" href="#exercise-6" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Please complete this exercise by <strong>09:15 Wednesday, 16 October 2019</strong>.</p>
</div>
<div class="admonition-start-your-assignment admonition">
<p class="first admonition-title">Start your assignment</p>
<p class="last"><strong>You can start working on your copy of Exercise 6 by</strong> accepting <a class="reference external" href="https://classroom.github.com/a/ooOQQI1V">the GitHub Classroom assignment</a>.</p>
</div>
<p>You can also take a look at the open course copy of <a class="reference external" href="https://github.com/Geo-Python-2019/Exercise-6">Exercise 6 in the course GitHub repository</a> (does not require logging in).
Note that you should not try to make changes to this copy of the exercise, but rather only to the copy available via GitHub Classroom.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Please note that <strong>we provide assignment feedback only for students enrolled in the course at the University of Helsinki</strong>.</p>
</div>
<div class="section" id="cloud-computing-environments">
<h2>Cloud computing environments<a class="headerlink" href="#cloud-computing-environments" title="Permalink to this headline">¶</a></h2>
<a class="reference external image-reference" href="https://mybinder.org/v2/gh/Geo-Python-2019/Binder/master?urlpath=lab"><img alt="https://img.shields.io/badge/launch-binder-red.svg" src="https://img.shields.io/badge/launch-binder-red.svg" /></a>
<a class="reference external image-reference" href="https://notebooks.csc.fi/#/blueprint/d71cd2d26d924f48820dc22b67a87d8e"><img alt="https://img.shields.io/badge/launch-CSC%20notebook-blue.svg" src="https://img.shields.io/badge/launch-CSC%20notebook-blue.svg" /></a>
</div>
<div class="section" id="exercise-6-hints">
<h2>Exercise 6 hints<a class="headerlink" href="#exercise-6-hints" title="Permalink to this headline">¶</a></h2>
<div class="section" id="data-format-for-problems-1-3">
<h3>Data format for problems 1-3<a class="headerlink" href="#data-format-for-problems-1-3" title="Permalink to this headline">¶</a></h3>
<p>The first 5 rows of the data file look like the following:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">STATION</span>           <span class="n">ELEVATION</span>  <span class="n">LATITUDE</span>   <span class="n">LONGITUDE</span>  <span class="n">DATE</span>     <span class="n">PRCP</span>     <span class="n">TAVG</span>     <span class="n">TMAX</span>     <span class="n">TMIN</span>
<span class="o">-----------------</span> <span class="o">----------</span> <span class="o">----------</span> <span class="o">----------</span> <span class="o">--------</span> <span class="o">--------</span> <span class="o">--------</span> <span class="o">--------</span> <span class="o">--------</span>
<span class="n">GHCND</span><span class="p">:</span><span class="n">FIE00142080</span>         <span class="mi">51</span>    <span class="mf">60.3269</span>    <span class="mf">24.9603</span> <span class="mi">19520101</span> <span class="mf">0.31</span>     <span class="mi">37</span>       <span class="mi">39</span>       <span class="mi">34</span>
<span class="n">GHCND</span><span class="p">:</span><span class="n">FIE00142080</span>         <span class="mi">51</span>    <span class="mf">60.3269</span>    <span class="mf">24.9603</span> <span class="mi">19520102</span> <span class="o">-</span><span class="mi">9999</span>    <span class="mi">35</span>       <span class="mi">37</span>       <span class="mi">34</span>
<span class="n">GHCND</span><span class="p">:</span><span class="n">FIE00142080</span>         <span class="mi">51</span>    <span class="mf">60.3269</span>    <span class="mf">24.9603</span> <span class="mi">19520103</span> <span class="mf">0.14</span>     <span class="mi">33</span>       <span class="mi">36</span>       <span class="o">-</span><span class="mi">9999</span>
</pre></div>
</div>
<p>As you can see, we have rainfall data (<code class="docutils literal"><span class="pre">PRCP</span></code>) in inches, and temperature data (<code class="docutils literal"><span class="pre">TAVG</span></code>, <code class="docutils literal"><span class="pre">TMAX</span></code>, and <code class="docutils literal"><span class="pre">TMIN</span></code>) in degrees Fahrenheit.
Dates of the observations are given in the format YYYYMMDD.
No-data values are indicated with <code class="docutils literal"><span class="pre">-9999</span></code>.</p>
</div>
<div class="section" id="reading-in-fixed-width-text-files">
<h3>Reading in fixed-width text files<a class="headerlink" href="#reading-in-fixed-width-text-files" title="Permalink to this headline">¶</a></h3>
<p>Rather than having separation by commas, our data file this week has a variable number of spaces between values.
Previously, we read in comma-separated values using the option <code class="docutils literal"><span class="pre">sep=','</span></code> for the Pandas <code class="docutils literal"><span class="pre">read_csv()</span></code> function.
For a variable number of spaces we can either use the <code class="docutils literal"><span class="pre">sep</span></code> or <code class="docutils literal"><span class="pre">delim_whitespace</span> <span class="pre">parameter</span></code>; <code class="docutils literal"><span class="pre">sep='\s+</span></code> or <code class="docutils literal"><span class="pre">delim_whitespace=True</span></code> will work, but not both.
In this case, we suggest using <code class="docutils literal"><span class="pre">delim_whitespace</span></code>.</p>
</div>
<div class="section" id="skipping-the-second-row-of-a-file">
<h3>Skipping the second row of a file<a class="headerlink" href="#skipping-the-second-row-of-a-file" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">skiprows=n</span></code> option of the Pandas <code class="docutils literal"><span class="pre">read_csv()</span></code> function is an easy way to skip the first <em>n</em> rows of a file when reading it.
If we wanted to skip the first two rows of our data file, we could thus use <code class="docutils literal"><span class="pre">skiprows=2</span></code>.
The value for <code class="docutils literal"><span class="pre">n</span></code>, however, need not be a single value, but can also be given in the form of a list.
In this way, one can skip reading the second row of a file using a list with an index value for the second row.
In other words, you can use <code class="docutils literal"><span class="pre">skiprows=[1]</span></code>.</p>
</div>
<div class="section" id="joining-data-from-one-dataframe-to-another">
<h3>Joining data from one DataFrame to another<a class="headerlink" href="#joining-data-from-one-dataframe-to-another" title="Permalink to this headline">¶</a></h3>
<p>One quite useful functionality in Pandas is the ability to conduct a <strong>table join</strong>
where data from one DataFrame is merged with another DataFrame based on a common <strong>key</strong>.
Hence, making a table join requires that you have at least one common variable in both
of the DataFrames that can be used to combine the data together.</p>
<p>Consider a following example. Let’s first create some test data to our DataFrames.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">data1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">[[</span><span class="s1">&#39;20170101&#39;</span><span class="p">,</span> <span class="s1">&#39;Pluto&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;20170102&#39;</span><span class="p">,</span> <span class="s1">&#39;Panda&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;20170103&#39;</span><span class="p">,</span> <span class="s1">&#39;Snoopy&#39;</span><span class="p">]],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Time&#39;</span><span class="p">,</span> <span class="s1">&#39;Favourite_dog&#39;</span><span class="p">])</span>

<span class="gp">In [2]: </span><span class="n">data2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">[[</span><span class="s1">&#39;20170101&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;20170101&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;20170102&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;20170104&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;20170104&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">]],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Time&#39;</span><span class="p">,</span> <span class="s1">&#39;Value&#39;</span><span class="p">])</span>

<span class="gp">In [3]: </span><span class="n">data1</span>
<span class="gh">Out[3]: </span><span class="go"></span>
<span class="go">       Time Favourite_dog</span>
<span class="go">0  20170101         Pluto</span>
<span class="go">1  20170102         Panda</span>
<span class="go">2  20170103        Snoopy</span>

<span class="gp">In [4]: </span><span class="n">data2</span>
<span class="go">                                                                                                                 Out[4]: </span>
<span class="go">       Time  Value</span>
<span class="go">0  20170101      1</span>
<span class="go">1  20170101      2</span>
<span class="go">2  20170102      3</span>
<span class="go">3  20170104      3</span>
<span class="go">4  20170104      8</span>
</pre></div>
</div>
<p>As we can see here, there different number of rows in the DataFrames. Important thing to notice is that there seems to be a common column called <code class="docutils literal"><span class="pre">Time</span></code> that we can use to
join these DataFrames together. In Pandas we can conduct a table join with <code class="docutils literal"><span class="pre">merge</span></code> -function. Consider following example where we join the data <strong>from</strong> <code class="docutils literal"><span class="pre">data2</span></code> DataFrame <strong>to</strong> <code class="docutils literal"><span class="pre">data1</span></code> DataFrame.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">join1</span> <span class="o">=</span> <span class="n">data1</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">data2</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;Time&#39;</span><span class="p">)</span>

<span class="gp">In [6]: </span><span class="n">join1</span>
<span class="gh">Out[6]: </span><span class="go"></span>
<span class="go">       Time Favourite_dog  Value</span>
<span class="go">0  20170101         Pluto      1</span>
<span class="go">1  20170101         Pluto      2</span>
<span class="go">2  20170102         Panda      3</span>
</pre></div>
</div>
<p>Ahaa! Now we can see that we managed to get the <code class="docutils literal"><span class="pre">Value</span></code> column from <code class="docutils literal"><span class="pre">data2</span></code> in our <code class="docutils literal"><span class="pre">data1</span></code> DataFrame (here we just assigned those values to a new variable <code class="docutils literal"><span class="pre">join1</span></code>).
Notice also that the <code class="docutils literal"><span class="pre">Pluto</span></code> is two times in the joined DataFrame although, it was only once in the original one. Hence, Pandas automatically duplicates the values in such
columns where there are more matching values in one DataFrame compared to the other.</p>
<p>However, it is important to notice that there were more values in the <code class="docutils literal"><span class="pre">data2</span></code> DataFrame than in <code class="docutils literal"><span class="pre">data1</span></code>. The result <code class="docutils literal"><span class="pre">join1</span></code>, does not contain the values <code class="docutils literal"><span class="pre">3</span> <span class="pre">and</span> <span class="pre">8</span></code> that were from day <code class="docutils literal"><span class="pre">20170104</span></code> and they were omitted.
This might be okey, but in some cases it is useful to also bring <strong>all</strong> values from another DataFrame even though there would not be a matching value in the column that used for making the join (i.e. the <code class="docutils literal"><span class="pre">key</span></code>).</p>
<p>We can bring all the values from another DataFrame by specifyin parameter <code class="docutils literal"><span class="pre">how='outer'</span></code>, i.e. we will make an <strong>outer</strong> join.
Let’s consider another example with the outer join.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [7]: </span><span class="n">join2</span> <span class="o">=</span> <span class="n">data1</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">data2</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;Time&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;outer&#39;</span><span class="p">)</span>

<span class="gp">In [8]: </span><span class="n">join2</span>
<span class="gh">Out[8]: </span><span class="go"></span>
<span class="go">       Time Favourite_dog  Value</span>
<span class="go">0  20170101         Pluto    1.0</span>
<span class="go">1  20170101         Pluto    2.0</span>
<span class="go">2  20170102         Panda    3.0</span>
<span class="go">3  20170103        Snoopy    NaN</span>
<span class="go">4  20170104           NaN    3.0</span>
<span class="go">5  20170104           NaN    8.0</span>
</pre></div>
</div>
<p>Cool! Nowe we have all the values included from both DataFrames and if Pandas did not find a common value in the <code class="docutils literal"><span class="pre">key</span></code> column, it still kept them and inserted <code class="docutils literal"><span class="pre">NaN</span></code> values into <code class="docutils literal"><span class="pre">Favourite_dog</span></code> column and <code class="docutils literal"><span class="pre">Value</span></code> column.
Overall, knowing how to conduct a table join can be really handy in many different situations.
See more examples and documentation from <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/merging.html">official documentation of Pandas</a>.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, B. White, Department of Marine Sciences, UNC Chapel Hill
      <span class="lastupdated">
        Last updated on Jan 26, 2020.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
    <p> <br/> <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br /> </a></p>
     


</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>